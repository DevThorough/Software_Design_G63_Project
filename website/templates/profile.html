{% extends 'index.html' %}
{% block title %}Client Profile Management{% endblock %}
{% block content %}
    <style>
        section {
            max-width: 600px;
            margin: auto;
        }
        .content-body, .hide-cancel {
            display: none;
        }
        .show-active {
            display: block;
        }
    </style>
    <section>
        <h1>Client Profile Management</h1>
  
    <div id="profileInfo" class="content-body show-active">
        <p>{{fullName}}</p>
        <p>{{address1}}</p>
        <p>{{address2}}</p>
        <p>{{city}}</p>
        <p>{{state}}</p>
        <p>{{zipCode}}</p>
        <button type="button" class="edit-btn btn-group1">Edit</button>
    </div>
    <form action="#" method="post" id="profileEdit" class="content-body">
        <div class="form-floating">
            <input class="form-control" type="text" id="fullname" name="fullname" maxlength="50" value="" placeholder="John Doe" required>
            <label for="fullname">Full Name</label>
        </div>
        
        <div class="form-floating">
            <input class="form-control" type="text" id="address1" name="address1" maxlength="100" value="" placeholder="123 Main St" required>
            <label class="control-label" for="address1">Address 1</label>
        </div>
        
        <div class="form-floating">
            <input class="form-control" type="text" id="address2" name="address2" maxlength="100" value="" placeholder="Unit #123">
            <label for="address2">Address 2</label>
        </div>
        
        <div class="form-floating">
            <input class="form-control" type="text" id="city" name="city" maxlength="100" value="" placeholder="Houston" required>
            <label for="city">City</label>
        </div>
        
        <div class="form-floating">
            <select class="form-control" id="state" name="state" value="" placeholder="Texas" required>
                <option value="" disabled selected>Select State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>                
            </select>
            <label for="state">State</label>
        </div>
        
        <div class="form-floating">
            <input class="form-control" type="text" id="zipcode" name="zipcode" maxlength="9" pattern="[0-9]{5,}" title="Zipcode must be at least 5 digits"  value="" placeholder="55555-5555"required>
            <label for="zipcode">Zipcode</label>
        </div>
        
        <input type="submit" value="Submit">
        <button type="button" id="profileCancelBtn" class="cancel-btn btn-group1">Cancel</button>
    </form>
    </section>
     
    <script>
        let record = "{{onRecord}}";
        if (record == "False"){
            document.getElementById("profileInfo").classList.remove('show-active');
            document.getElementById("profileCancelBtn").classList.add('hide-cancel');
            document.getElementById("profileEdit").classList.add('show-active');
        }else if (record == "True"){
            formInputs = document.getElementsByClassName("form-control");
            //console.log(formInputs);
            let argArray = ["{{fullName}}","{{address1}}","{{address2}}","{{city}}","{{state}}","{{zipCode}}"];
            for (let index = 0; index < 6; index++) {
                formInputs[index].setAttribute('value',argArray[index]);
            }
        }

        //function to remove .show-active class and add to clicked
        function setNewActive(el) {
            // select all .content-body
            var contentBodies = document.getElementsByClassName('content-body');
            // remove .show-active
            for (var contentBody of contentBodies) {
                contentBody.classList.remove('show-active');
            }
            //add .show-active back
            let identity = "";
            if (el.textContent == "Cancel")
                identity = "profileInfo";
            else
                identity = "profileEdit";
            document.getElementById(identity).classList.add('show-active');
        }
        //select tab class and loop through
        var buttons = document.getElementsByClassName('btn-group1');
        for (var button of buttons) {
            //add click listener
            button.addEventListener('click', function (e) {
                //console.log(e.currentTarget.textContent)
                setNewActive(e.currentTarget);
            })
        }
    </script>
    
{% endblock %}